<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TabHarmony - AI 设置</title>
  <link rel="stylesheet" href="options.css">
</head>
<body>
  <div class="container">
    <header>
      <h1>AI 配置</h1>
      <p class="subtitle">配置 AI 服务商和模型参数</p>
    </header>

    <main>
      <!-- Provider Selection -->
      <section class="config-section">
        <h2>服务商</h2>
        <div class="provider-tabs">
          <button class="provider-tab active" data-provider="openai">OpenAI</button>
          <button class="provider-tab" data-provider="claude">Claude</button>
          <button class="provider-tab" data-provider="custom">自定义</button>
        </div>
      </section>

      <!-- Endpoint Configuration -->
      <section class="config-section">
        <h2>接口配置</h2>
        <div class="form-group">
          <label for="endpoint">API 端点</label>
          <input type="text" id="endpoint" placeholder="https://api.openai.com/v1/chat/completions">
        </div>
        <div class="form-group">
          <label for="apiKey">API 密钥</label>
          <div class="input-with-toggle">
            <input type="password" id="apiKey" placeholder="输入你的 API 密钥">
            <button class="toggle-visibility" id="toggleApiKey">
              <svg class="eye-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                <circle cx="12" cy="12" r="3"></circle>
              </svg>
            </button>
          </div>
        </div>
      </section>

      <!-- Model Configuration -->
      <section class="config-section">
        <h2>模型</h2>
        <div class="form-group">
          <label for="model">模型名称</label>
          <select id="model">
            <option value="gpt-4o-mini">gpt-4o-mini</option>
            <option value="gpt-4o">gpt-4o</option>
            <option value="gpt-4.1">gpt-4.1</option>
            <option value="gpt-4.1-mini">gpt-4.1-mini</option>
            <option value="gpt-4.1-nano">gpt-4.1-nano</option>
            <option value="o1">o1</option>
            <option value="o1-mini">o1-mini</option>
            <option value="o1-pro">o1-pro</option>
            <option value="o3-mini">o3-mini</option>
            <option value="claude-sonnet-4-20250514">claude-sonnet-4</option>
            <option value="claude-3-5-sonnet-20241022">claude-3.5-sonnet</option>
            <option value="claude-3-5-haiku-20241022">claude-3.5-haiku</option>
            <option value="claude-3-opus-20240229">claude-3-opus</option>
            <option value="custom">自定义...</option>
          </select>
          <input type="text" id="customModel" class="hidden" placeholder="输入自定义模型名称">
        </div>
      </section>

      <!-- Parameters -->
      <section class="config-section">
        <h2>参数</h2>
        <div class="form-row">
          <div class="form-group half">
            <label for="temperature">温度</label>
            <div class="range-input">
              <input type="range" id="temperature" min="0" max="2" step="0.1" value="0.7">
              <span class="range-value" id="temperatureValue">0.7</span>
            </div>
          </div>
          <div class="form-group half">
            <label for="maxTokens">最大 Token</label>
            <input type="number" id="maxTokens" value="2000" min="100" max="128000">
          </div>
        </div>
      </section>

      <!-- Open Mode -->
      <section class="config-section">
        <h2>打开方式</h2>
        <div class="form-group">
          <label for="defaultOpenMode">默认打开方式</label>
          <select id="defaultOpenMode">
            <option value="popup">弹窗</option>
            <option value="sidepanel">侧边栏</option>
          </select>
        </div>
      </section>

      <!-- Prompts -->
      <section class="config-section">
        <h2>提示词</h2>
        <div class="form-group">
          <label for="groupPrompt">分组提示词</label>
          <textarea id="groupPrompt" rows="8" placeholder="标签分组的系统提示词..."></textarea>
          <button class="reset-prompt-btn" id="resetGroupPrompt">恢复默认</button>
        </div>
        <div class="form-group">
          <label for="searchPrompt">搜索提示词</label>
          <textarea id="searchPrompt" rows="4" placeholder="标签搜索的系统提示词..."></textarea>
          <button class="reset-prompt-btn" id="resetSearchPrompt">恢复默认</button>
        </div>
      </section>

      <!-- Test Connection -->
      <section class="config-section">
        <h2>测试连接</h2>
        <div class="test-area">
          <button id="testButton" class="primary-button">
            <span class="button-text">测试 API</span>
            <div class="loading-spinner hidden"></div>
          </button>
          <div id="testResult" class="test-result hidden"></div>
        </div>
      </section>

      <!-- Actions -->
      <div class="actions">
        <button id="saveButton" class="primary-button">保存配置</button>
        <button id="resetButton" class="secondary-button">恢复默认</button>
      </div>
    </main>
  </div>
  <script src="options.js" type="module"></script>
</body>
</html>
